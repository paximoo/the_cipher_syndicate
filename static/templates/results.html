{% extends 'base.html' %}

{% block main %}
<center>
<h1>{{ date }}</h1>
<form action='/graph' class="grid" method='post'>
    <input type='hidden' name='long' value='{{ long }}'>
    <input type='hidden' name='lat' value='{{ lat }}'>
    {% for param in params %}
    <div class="card border-dark mb-3">
        <div class="card-header">{{ param }}</div>
            <div class="card-body text-dark">
                <h5 class="card-title">{{ avgs[loop.index0] }}</h5>
                <button class='btn btn-primary' type='submit' name='parameter' value='{{ param }}'>Graph</button>
            </div>
    </div>    
    {% endfor %}
</form>
<form action='/download' method='post'>
    <button class="btn btn-primary" style="margin-top: 70px;" type='submit'>Download data as CSV</button>
</form>
<script>
    function toggleDetails() {
        const details = document.getElementById("table");
        const btn = document.getElementById("toggleBtn");

        if (details.style.display === "none" || details.style.display === "") {
            details.style.display = "block";
            btn.textContent = "Hide details...";
        } else {
            details.style.display = "none";
            btn.textContent = "More details...";
        }
    }
</script> 
<div class="details" id="toggleBtn" onclick="toggleDetails()">
    <p>More details...</p>
</div>
<div class="table-container" id="table" style="display: none;">
    <table class="table">
        <tr>
            <th>Year</th>
            {% for param in params %}
                <th scope="col">{{ param }}</th>
            {% endfor %}
        </tr>
        {% for ind in range(param_entries[0]|length) %}
        <tr>
            <td scope="row">{{ start_year + ind }}</td>
            {% for param in param_entries %}
                <td scope="row">{{ param[ind] }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</div>
</center>
{% endblock %}
